<div class="header-main">
  <div class="container">
    <a href="index.html" class="header-logo">
      <img
        src="./assets/images/logo/logo.png"
        alt="logo"
        width="90"
        height="80"
      />
    </a>

    <div class="header-search-container">
      <input
        type="search"
        name="search"
        class="search-field"
        placeholder="Enter your Electronic product name !!"
      />

      <button class="search-btn">
        <ion-icon name="search-outline"></ion-icon>
      </button>
    </div>

    <div class="header-user-actions">
      <a href="./userlogin.html" class="user-login">Login</a>
      <p class="user-profile">Hello, <span class="user-id">User</span></p>

      <a class="action-btn" type="button" href="/userProfile.html">
        <ion-icon name="person-outline"></ion-icon>
      </a>

      <a class="action-btn" type="button" href="cart.html">
        <ion-icon name="bag-handle-outline"></ion-icon>
        <span class="count">0</span>
      </a>

      <a href="./index.html" class="user-logout">Logout</a>
    </div>
  </div>

  <script>
    const userLoginElement = document.querySelector(".user-login");
    const userProfileElement = document.querySelector(".user-profile");
    const userIdElement = document.querySelector(".user-id");
    const userLogoutElement = document.querySelector(".user-logout");
    const cartCount = document.querySelector(".count");

    let isLoggedIn = sessionStorage.getItem("isLoggedIn");
    //let cartItems = JSON.parse(localStorage.getItem("cartItems")).length;

    function updateLoginState() {
      // Check login status
      isLoggedIn = sessionStorage.getItem("isLoggedIn") === "true";
      // Update UI based on login status
      userLoginElement.style.display = isLoggedIn ? "none" : "block";
      userProfileElement.style.display = isLoggedIn ? "block" : "none";
      userLogoutElement.style.display = isLoggedIn ? "block" : "none";

      if (isLoggedIn) {
        const firstName = getLoggedInUserFirstName();
        userIdElement.textContent = firstName;
      } else {
        userIdElement.textContent = ""; // Clear user ID when not logged in
      }
    }

    // Call updateLoginState on page load
    updateLoginState();

    // Log out
    userLogoutElement.addEventListener("click", () => {
      sessionStorage.setItem("isLoggedIn", false);
      window.location.href = "./userLogin.html";
      updateLoginState(); // Update UI after logout
    });

    // Cart count number
    //cartCount.innerHTML = cartItems !== null ? cartItems : 0;

    function getLoggedInUserFirstName() {
      const userData = JSON.parse(sessionStorage.getItem("userData")) || [];

      if (userData && userData.firstName) {
        return userData.firstName;
      } else {
        return null;
      }
    }
  </script>
</div>
